# 微信公众号开发
## 1、验证服务器有效性
* 填写服务器配置信息
  * url  开发者服务器地址
    * 通过ngrok工具将本地地址转化外网能访问的地址（内网穿透）
  * token 参与微信加密签名的参数
* 验证服务器消息有效性
  * 将token、timestamp、nonce三个参数进行字典序排序
  * 将三个参数字符串拼接成一个字符串进行sha1加密
  * 开发者获得加密后的字符串可与signature对比，标识该请求来源于微信
  
## 2、自动回复
* 接受用户发送的消息
  * 微信会发送两种类型消息：GET请求和POST请求
  * GET请求用来验证服务器有效性
  * POST请求用来接受用户发送的消息
    * POST请求会携带两种参数：querystring参数 和 body参数
    * 其中body参数需要用特殊方式接受
* 判断消息是否来自于微信服务器
* 接受用户发送的xml数据：req.on('data', data => {})
* 将xml数据解析为js对象：xml2js
* 将js对象格式化成为一个更好操作的对象
* 最后根据用户消息内容，返回特定的响应
  * 响应数据必须是xml格式，具体参照官方文档  
  * https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1421140543